#ifndef DECODE_H
#define DECODE_H

#include<map>
#include<string>

#include "bit.h"
#include "hex.h"

// std::map<std::string, short> lengthMap = {
//     { "101", 2 }, 
//     { "11", 3 }, 
//     { "100", 4 }, 
//     { "011", 5 }, 
//     { "0101", 6 }, 
//     { "0100", 7 }, 
//     { "0011", 8 }, 
//     { "00101", 9 }, 
//     { "001000", 10 }, { "001001", 11 }, 
//     { "0001100", 12 }, { "0001110", 13 }, { "0001101", 14 }, { "0001111", 15 }, 
//     { "00010000", 16 }, { "00010100", 17 }, { "00010010", 18 }, { "00010110", 19 }, 
//     { "00010001", 20 }, { "00010101", 21 }, { "00010011", 22 }, { "00010111", 23 }, 
//     { "0000110000", 24 }, { "0000111000", 25 }, { "0000110100", 26 }, { "0000111100", 27 }, 
//     { "0000110010", 28 }, { "0000111010", 29 }, { "0000110110", 30 }, { "0000111110", 31 }, 
//     { "0000110001", 32 }, { "0000111001", 33 }, { "0000110101", 34 }, { "0000111101", 35 }, 
//     { "0000110011", 36 }, { "0000111011", 37 }, { "0000110111", 38 }, { "0000111111", 39 }, 
//     { "00001000000", 40 }, { "00001010000", 41 }, { "00001001000", 42 }, { "00001011000", 43 }, 
//     { "00001000100", 44 }, { "00001010100", 45 }, { "00001001100", 46 }, { "00001011100", 47 }, 
//     { "00001000010", 48 }, { "00001010010", 49 }, { "00001001010", 50 }, { "00001011010", 51 }, 
//     { "00001000110", 52 }, { "00001010110", 53 }, { "00001001110", 54 }, { "00001011110", 55 }, 
//     { "00001000001", 56 }, { "00001010001", 57 }, { "00001001001", 58 }, { "00001011001", 59 }, 
//     { "00001000101", 60 }, { "00001010101", 61 }, { "00001001101", 62 }, { "00001011101", 63 }, 
//     { "00001000011", 64 }, { "00001010011", 65 }, { "00001001011", 66 }, { "00001011011", 67 }, 
//     { "00001000111", 68 }, { "00001010111", 69 }, { "00001001111", 70 }, { "00001011111", 71 }, 
//     { "000001000000", 72 }, { "000001100000", 73 }, { "000001010000", 74 }, { "000001110000", 75 }, 
//     { "000001001000", 76 }, { "000001101000", 77 }, { "000001011000", 78 }, { "000001111000", 79 }, 
//     { "000001000100", 80 }, { "000001100100", 81 }, { "000001010100", 82 }, { "000001110100", 83 }, 
//     { "000001001100", 84 }, { "000001101100", 85 }, { "000001011100", 86 }, { "000001111100", 87 }, 
//     { "000001000010", 88 }, { "000001100010", 89 }, { "000001010010", 90 }, { "000001110010", 91 }, 
//     { "000001001010", 92 }, { "000001101010", 93 }, { "000001011010", 94 }, { "000001111010", 95 }, 
//     { "000001000110", 96 }, { "000001100110", 97 }, { "000001010110", 98 }, { "000001110110", 99 }, 
//     { "000001001110", 100 }, { "000001101110", 101 }, { "000001011110", 102 }, { "000001111110", 103 }, 
//     { "000001000001", 104 }, { "000001100001", 105 }, { "000001010001", 106 }, { "000001110001", 107 }, 
//     { "000001001001", 108 }, { "000001101001", 109 }, { "000001011001", 110 }, { "000001111001", 111 }, 
//     { "000001000101", 112 }, { "000001100101", 113 }, { "000001010101", 114 }, { "000001110101", 115 }, 
//     { "000001001101", 116 }, { "000001101101", 117 }, { "000001011101", 118 }, { "000001111101", 119 }, 
//     { "000001000011", 120 }, { "000001100011", 121 }, { "000001010011", 122 }, { "000001110011", 123 }, 
//     { "000001001011", 124 }, { "000001101011", 125 }, { "000001011011", 126 }, { "000001111011", 127 }, 
//     { "000001000111", 128 }, { "000001100111", 129 }, { "000001010111", 130 }, { "000001110111", 131 }, 
//     { "000001001111", 132 }, { "000001101111", 133 }, { "000001011111", 134 }, { "000001111111", 135 }, 
//     { "00000010000000", 136 }, { "00000011000000", 137 }, { "00000010100000", 138 }, { "00000011100000", 139 }, 
//     { "00000010010000", 140 }, { "00000011010000", 141 }, { "00000010110000", 142 }, { "00000011110000", 143 }, 
//     { "00000010001000", 144 }, { "00000011001000", 145 }, { "00000010101000", 146 }, { "00000011101000", 147 }, 
//     { "00000010011000", 148 }, { "00000011011000", 149 }, { "00000010111000", 150 }, { "00000011111000", 151 }, 
//     { "00000010000100", 152 }, { "00000011000100", 153 }, { "00000010100100", 154 }, { "00000011100100", 155 }, 
//     { "00000010010100", 156 }, { "00000011010100", 157 }, { "00000010110100", 158 }, { "00000011110100", 159 }, 
//     { "00000010001100", 160 }, { "00000011001100", 161 }, { "00000010101100", 162 }, { "00000011101100", 163 }, 
//     { "00000010011100", 164 }, { "00000011011100", 165 }, { "00000010111100", 166 }, { "00000011111100", 167 }, 
//     { "00000010000010", 168 }, { "00000011000010", 169 }, { "00000010100010", 170 }, { "00000011100010", 171 }, 
//     { "00000010010010", 172 }, { "00000011010010", 173 }, { "00000010110010", 174 }, { "00000011110010", 175 }, 
//     { "00000010001010", 176 }, { "00000011001010", 177 }, { "00000010101010", 178 }, { "00000011101010", 179 }, 
//     { "00000010011010", 180 }, { "00000011011010", 181 }, { "00000010111010", 182 }, { "00000011111010", 183 }, 
//     { "00000010000110", 184 }, { "00000011000110", 185 }, { "00000010100110", 186 }, { "00000011100110", 187 }, 
//     { "00000010010110", 188 }, { "00000011010110", 189 }, { "00000010110110", 190 }, { "00000011110110", 191 }, 
//     { "00000010001110", 192 }, { "00000011001110", 193 }, { "00000010101110", 194 }, { "00000011101110", 195 }, 
//     { "00000010011110", 196 }, { "00000011011110", 197 }, { "00000010111110", 198 }, { "00000011111110", 199 }, 
//     { "00000010000001", 200 }, { "00000011000001", 201 }, { "00000010100001", 202 }, { "00000011100001", 203 }, 
//     { "00000010010001", 204 }, { "00000011010001", 205 }, { "00000010110001", 206 }, { "00000011110001", 207 }, 
//     { "00000010001001", 208 }, { "00000011001001", 209 }, { "00000010101001", 210 }, { "00000011101001", 211 }, 
//     { "00000010011001", 212 }, { "00000011011001", 213 }, { "00000010111001", 214 }, { "00000011111001", 215 }, 
//     { "00000010000101", 216 }, { "00000011000101", 217 }, { "00000010100101", 218 }, { "00000011100101", 219 }, 
//     { "00000010010101", 220 }, { "00000011010101", 221 }, { "00000010110101", 222 }, { "00000011110101", 223 }, 
//     { "00000010001101", 224 }, { "00000011001101", 225 }, { "00000010101101", 226 }, { "00000011101101", 227 }, 
//     { "00000010011101", 228 }, { "00000011011101", 229 }, { "00000010111101", 230 }, { "00000011111101", 231 }, 
//     { "00000010000011", 232 }, { "00000011000011", 233 }, { "00000010100011", 234 }, { "00000011100011", 235 }, 
//     { "00000010010011", 236 }, { "00000011010011", 237 }, { "00000010110011", 238 }, { "00000011110011", 239 }, 
//     { "00000010001011", 240 }, { "00000011001011", 241 }, { "00000010101011", 242 }, { "00000011101011", 243 }, 
//     { "00000010011011", 244 }, { "00000011011011", 245 }, { "00000010111011", 246 }, { "00000011111011", 247 }, 
//     { "00000010000111", 248 }, { "00000011000111", 249 }, { "00000010100111", 250 }, { "00000011100111", 251 }, 
//     { "00000010010111", 252 }, { "00000011010111", 253 }, { "00000010110111", 254 }, { "00000011110111", 255 }, 
//     { "00000010001111", 256 }, { "00000011001111", 257 }, { "00000010101111", 258 }, { "00000011101111", 259 }, 
//     { "00000010011111", 260 }, { "00000011011111", 261 }, { "00000010111111", 262 }, { "00000011111111", 263 }, 
//     { "000000000000000", 264 }, { "000000010000000", 265 }, { "000000001000000", 266 }, { "000000011000000", 267 }, 
//     { "000000000100000", 268 }, { "000000010100000", 269 }, { "000000001100000", 270 }, { "000000011100000", 271 }, 
//     { "000000000010000", 272 }, { "000000010010000", 273 }, { "000000001010000", 274 }, { "000000011010000", 275 }, 
//     { "000000000110000", 276 }, { "000000010110000", 277 }, { "000000001110000", 278 }, { "000000011110000", 279 }, 
//     { "000000000001000", 280 }, { "000000010001000", 281 }, { "000000001001000", 282 }, { "000000011001000", 283 }, 
//     { "000000000101000", 284 }, { "000000010101000", 285 }, { "000000001101000", 286 }, { "000000011101000", 287 }, 
//     { "000000000011000", 288 }, { "000000010011000", 289 }, { "000000001011000", 290 }, { "000000011011000", 291 }, 
//     { "000000000111000", 292 }, { "000000010111000", 293 }, { "000000001111000", 294 }, { "000000011111000", 295 }, 
//     { "000000000000100", 296 }, { "000000010000100", 297 }, { "000000001000100", 298 }, { "000000011000100", 299 }, 
//     { "000000000100100", 300 }, { "000000010100100", 301 }, { "000000001100100", 302 }, { "000000011100100", 303 }, 
//     { "000000000010100", 304 }, { "000000010010100", 305 }, { "000000001010100", 306 }, { "000000011010100", 307 }, 
//     { "000000000110100", 308 }, { "000000010110100", 309 }, { "000000001110100", 310 }, { "000000011110100", 311 }, 
//     { "000000000001100", 312 }, { "000000010001100", 313 }, { "000000001001100", 314 }, { "000000011001100", 315 }, 
//     { "000000000101100", 316 }, { "000000010101100", 317 }, { "000000001101100", 318 }, { "000000011101100", 319 }, 
//     { "000000000011100", 320 }, { "000000010011100", 321 }, { "000000001011100", 322 }, { "000000011011100", 323 }, 
//     { "000000000111100", 324 }, { "000000010111100", 325 }, { "000000001111100", 326 }, { "000000011111100", 327 }, 
//     { "000000000000010", 328 }, { "000000010000010", 329 }, { "000000001000010", 330 }, { "000000011000010", 331 }, 
//     { "000000000100010", 332 }, { "000000010100010", 333 }, { "000000001100010", 334 }, { "000000011100010", 335 }, 
//     { "000000000010010", 336 }, { "000000010010010", 337 }, { "000000001010010", 338 }, { "000000011010010", 339 }, 
//     { "000000000110010", 340 }, { "000000010110010", 341 }, { "000000001110010", 342 }, { "000000011110010", 343 }, 
//     { "000000000001010", 344 }, { "000000010001010", 345 }, { "000000001001010", 346 }, { "000000011001010", 347 }, 
//     { "000000000101010", 348 }, { "000000010101010", 349 }, { "000000001101010", 350 }, { "000000011101010", 351 }, 
//     { "000000000011010", 352 }, { "000000010011010", 353 }, { "000000001011010", 354 }, { "000000011011010", 355 }, 
//     { "000000000111010", 356 }, { "000000010111010", 357 }, { "000000001111010", 358 }, { "000000011111010", 359 }, 
//     { "000000000000110", 360 }, { "000000010000110", 361 }, { "000000001000110", 362 }, { "000000011000110", 363 }, 
//     { "000000000100110", 364 }, { "000000010100110", 365 }, { "000000001100110", 366 }, { "000000011100110", 367 }, 
//     { "000000000010110", 368 }, { "000000010010110", 369 }, { "000000001010110", 370 }, { "000000011010110", 371 }, 
//     { "000000000110110", 372 }, { "000000010110110", 373 }, { "000000001110110", 374 }, { "000000011110110", 375 }, 
//     { "000000000001110", 376 }, { "000000010001110", 377 }, { "000000001001110", 378 }, { "000000011001110", 379 }, 
//     { "000000000101110", 380 }, { "000000010101110", 381 }, { "000000001101110", 382 }, { "000000011101110", 383 }, 
//     { "000000000011110", 384 }, { "000000010011110", 385 }, { "000000001011110", 386 }, { "000000011011110", 387 }, 
//     { "000000000111110", 388 }, { "000000010111110", 389 }, { "000000001111110", 390 }, { "000000011111110", 391 }, 
//     { "000000000000001", 392 }, { "000000010000001", 393 }, { "000000001000001", 394 }, { "000000011000001", 395 }, 
//     { "000000000100001", 396 }, { "000000010100001", 397 }, { "000000001100001", 398 }, { "000000011100001", 399 }, 
//     { "000000000010001", 400 }, { "000000010010001", 401 }, { "000000001010001", 402 }, { "000000011010001", 403 }, 
//     { "000000000110001", 404 }, { "000000010110001", 405 }, { "000000001110001", 406 }, { "000000011110001", 407 }, 
//     { "000000000001001", 408 }, { "000000010001001", 409 }, { "000000001001001", 410 }, { "000000011001001", 411 }, 
//     { "000000000101001", 412 }, { "000000010101001", 413 }, { "000000001101001", 414 }, { "000000011101001", 415 }, 
//     { "000000000011001", 416 }, { "000000010011001", 417 }, { "000000001011001", 418 }, { "000000011011001", 419 }, 
//     { "000000000111001", 420 }, { "000000010111001", 421 }, { "000000001111001", 422 }, { "000000011111001", 423 }, 
//     { "000000000000101", 424 }, { "000000010000101", 425 }, { "000000001000101", 426 }, { "000000011000101", 427 }, 
//     { "000000000100101", 428 }, { "000000010100101", 429 }, { "000000001100101", 430 }, { "000000011100101", 431 }, 
//     { "000000000010101", 432 }, { "000000010010101", 433 }, { "000000001010101", 434 }, { "000000011010101", 435 }, 
//     { "000000000110101", 436 }, { "000000010110101", 437 }, { "000000001110101", 438 }, { "000000011110101", 439 }, 
//     { "000000000001101", 440 }, { "000000010001101", 441 }, { "000000001001101", 442 }, { "000000011001101", 443 }, 
//     { "000000000101101", 444 }, { "000000010101101", 445 }, { "000000001101101", 446 }, { "000000011101101", 447 }, 
//     { "000000000011101", 448 }, { "000000010011101", 449 }, { "000000001011101", 450 }, { "000000011011101", 451 }, 
//     { "000000000111101", 452 }, { "000000010111101", 453 }, { "000000001111101", 454 }, { "000000011111101", 455 }, 
//     { "000000000000011", 456 }, { "000000010000011", 457 }, { "000000001000011", 458 }, { "000000011000011", 459 }, 
//     { "000000000100011", 460 }, { "000000010100011", 461 }, { "000000001100011", 462 }, { "000000011100011", 463 }, 
//     { "000000000010011", 464 }, { "000000010010011", 465 }, { "000000001010011", 466 }, { "000000011010011", 467 }, 
//     { "000000000110011", 468 }, { "000000010110011", 469 }, { "000000001110011", 470 }, { "000000011110011", 471 }, 
//     { "000000000001011", 472 }, { "000000010001011", 473 }, { "000000001001011", 474 }, { "000000011001011", 475 }, 
//     { "000000000101011", 476 }, { "000000010101011", 477 }, { "000000001101011", 478 }, { "000000011101011", 479 }, 
//     { "000000000011011", 480 }, { "000000010011011", 481 }, { "000000001011011", 482 }, { "000000011011011", 483 }, 
//     { "000000000111011", 484 }, { "000000010111011", 485 }, { "000000001111011", 486 }, { "000000011111011", 487 }, 
//     { "000000000000111", 488 }, { "000000010000111", 489 }, { "000000001000111", 490 }, { "000000011000111", 491 }, 
//     { "000000000100111", 492 }, { "000000010100111", 493 }, { "000000001100111", 494 }, { "000000011100111", 495 }, 
//     { "000000000010111", 496 }, { "000000010010111", 497 }, { "000000001010111", 498 }, { "000000011010111", 499 }, 
//     { "000000000110111", 500 }, { "000000010110111", 501 }, { "000000001110111", 502 }, { "000000011110111", 503 }, 
//     { "000000000001111", 504 }, { "000000010001111", 505 }, { "000000001001111", 506 }, { "000000011001111", 507 }, 
//     { "000000000101111", 508 }, { "000000010101111", 509 }, { "000000001101111", 510 }, { "000000011101111", 511 }, 
//     { "000000000011111", 512 }, { "000000010011111", 513 }, { "000000001011111", 514 }, { "000000011011111", 515 }, 
//     { "000000000111111", 516 }, { "000000010111111", 517 }, { "000000001111111", 518 }, 
//     { "000000011111111", 519 },  // End of stream
// };

// std::map<std::string, u_int8_t> offsetMap = {
//     {       "11", 0X00}, {     "1011", 0X01}, {     "1010", 0X02}, {    "10011", 0X03}, 
//     {    "10010", 0X04}, {    "10001", 0X05}, {    "10000", 0X06}, {   "011111", 0X07}, 
//     {   "011110", 0X08}, {   "011101", 0X09}, {   "011100", 0X0A}, {   "011011", 0X0B}, 
//     {   "011010", 0X0C}, {   "011001", 0X0D}, {   "011000", 0X0E}, {   "010111", 0X0F}, 
//     {   "010110", 0X10}, {   "010101", 0X11}, {   "010100", 0X12}, {   "010011", 0X13}, 
//     {   "010010", 0X14}, {   "010001", 0X15}, {  "0100001", 0X16}, {  "0100000", 0X17}, 
//     {  "0011111", 0X18}, {  "0011110", 0X19}, {  "0011101", 0X1A}, {  "0011100", 0X1B}, 
//     {  "0011011", 0X1C}, {  "0011010", 0X1D}, {  "0011001", 0X1E}, {  "0011000", 0X1F}, 
//     {  "0010111", 0X20}, {  "0010110", 0X21}, {  "0010101", 0X22}, {  "0010100", 0X23}, 
//     {  "0010011", 0X24}, {  "0010010", 0X25}, {  "0010001", 0X26}, {  "0010000", 0X27}, 
//     {  "0001111", 0X28}, {  "0001110", 0X29}, {  "0001101", 0X2A}, {  "0001100", 0X2B}, 
//     {  "0001011", 0X2C}, {  "0001010", 0X2D}, {  "0001001", 0X2E}, {  "0001000", 0X2F}, 
//     { "00001111", 0X30}, { "00001110", 0X31}, { "00001101", 0X32}, { "00001100", 0X33}, 
//     { "00001011", 0X34}, { "00001010", 0X35}, { "00001001", 0X36}, { "00001000", 0X37}, 
//     { "00000111", 0X38}, { "00000110", 0X39}, { "00000101", 0X3A}, { "00000100", 0X3B}, 
//     { "00000011", 0X3C}, { "00000010", 0X3D}, { "00000001", 0X3E}, { "00000000", 0X3F}, 
// };

struct lengthOffsetPair {
    int length;
    int offset;

    int bits;

    std::string dLength;
    std::string dOfset;
    std::string dOoffsseett;
};

std::string hex2str(unsigned char, int, int, bool);

// lengthOffsetPair Decode(std::ifstream*);
lengthOffsetPair Decode(char*, int&, int);


#endif